<html>
<head>
	<link href="lib/c3.css" rel="stylesheet" type="text/css">
	<link href="lib/bootstrap.min.css" rel="stylesheet" type="text/css">

	<script src="lib/d3.min.js" charset="utf-8"></script>
	<script src="lib/c3.js" type="text/javascript"></script>
	<script src="peg-0.8.0.min.js" type="text/javascript"></script>
	<script src="parser.js" type="text/javascript"></script>

	<script type="text/javascript">
		function parse() {
			var text = document.getElementById("input").value;
			var parsed = parser.parse(text)
			var output = JSON.stringify(parsed, null, 4); 

			document.getElementById("tree").style.display = 'none';
			document.getElementById("code").innerHTML = output;

        	var modData = [];
        	var chartType = (parsed[1].value).toString()
         	var labels
         	var parsedJson = parsed

           	parsed[0].array.forEach(function(d, i) {
           		console.log(d)
             	var item = [d.type];
               	item.push(d.value);
             	modData.push(item);
			});


           	var chart = c3.generate({
            	data: {
             	json: modData, type: chartType,
             }
           });


		}
	</script>	
</head>

<body>
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-5 col-md-offset-1">
				<h3>Chart code</h3>
				<textarea id="input" name="input" class="form-control" rows="20">
#data: 1,2,3
#type: bar
#color: red</textarea>
				<input class="btn btn-default" style="margin-top:10px" type="submit" value="Compile" onclick="parse()"><br/><br/>

			<div id="chart" class="col-md-12 col-md-offset-0" style="height:500px;">
					
				</div>


			</div>
		
			<div class="col-md-5 col-md-offset-0">
				<h3>Tree</h3>
				<p id="tree">Parse tree will appear here</p>
				<pre id="code"></pre>
			</div>

		</div>
	</div>
</body>
</html>



</head>
<body>